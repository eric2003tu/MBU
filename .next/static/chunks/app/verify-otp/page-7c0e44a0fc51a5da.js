(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[734],{1362:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(1847).A)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},2987:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(1847).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},5016:(e,t,n)=>{"use strict";n.d(t,{cn:()=>s});var a=n(2821),r=n(5889);function s(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.QP)((0,a.$)(t))}},5424:(e,t,n)=>{"use strict";n.d(t,{hD:()=>r,yK:()=>u,c4:()=>l,wR:()=>d});let a="https://real-est-beate-latest.onrender.com";class r extends Error{constructor(e,t,n){super(t),this.status=e,this.message=t,this.data=n,this.name="ApiError"}}async function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{body:n,params:s,headers:c,...i}=t,o=new URL("".concat(a).concat(e));s&&Object.entries(s).forEach(e=>{let[t,n]=e;void 0!==n&&o.searchParams.set(t,String(n))});let l={"Content-Type":"application/json",...c},d=function(e){if("undefined"==typeof document)return;let t=document.cookie.match(new RegExp("(?:^|;\\s*)".concat(e,"=([^;]*)")));return t?decodeURIComponent(t[1]):void 0}("auth_token");d&&(l.Authorization="Bearer ".concat(d));let u=await fetch(o.toString(),{...i,headers:l,body:void 0!==n?JSON.stringify(n):void 0});if(!u.ok){var m,f;let e;try{e=await u.json()}catch(t){e=await u.text()}let t=null!=(f=null!=(m=null==e?void 0:e.detail)?m:null==e?void 0:e.message)?f:"Request failed with status ".concat(u.status);throw new r(u.status,t,e)}if(204!==u.status)return u.json()}let c={get:(e,t)=>s(e,{...t,method:"GET"}),post:(e,t,n)=>s(e,{...n,method:"POST",body:t})},i="auth_token";function o(e){"undefined"!=typeof document&&(document.cookie=["".concat(i,"=").concat(encodeURIComponent(e)),"max-age=".concat(604800),"path=/","SameSite=Lax"].join("; "))}function l(){if("undefined"==typeof document)return;let e=document.cookie.match(new RegExp("(?:^|;\\s*)".concat(i,"=([^;]*)")));return e?decodeURIComponent(e[1]):void 0}function d(){return!!l()}let u={register:async e=>c.post("/auth/register",e),login:async e=>{let t=await c.post("/auth/login",e);return t.access_token&&o(t.access_token),t},verifyOtp:async e=>{let t=await c.post("/auth/verify-otp",e);return t.access_token&&o(t.access_token),t},resendOtp:async e=>c.post("/auth/resend-otp",e),logout:async()=>{try{await c.post("/auth/logout")}finally{"undefined"!=typeof document&&(document.cookie="".concat(i,"=; max-age=0; path=/; SameSite=Lax"))}},me:async()=>c.get("/auth/me")}},7003:(e,t,n)=>{"use strict";n.d(t,{$:()=>l});var a=n(5155),r=n(2115),s=n(2467),c=n(3101),i=n(5016);let o=(0,c.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=r.forwardRef((e,t)=>{let{className:n,variant:r,size:c,asChild:l=!1,...d}=e,u=l?s.DX:"button";return(0,a.jsx)(u,{className:(0,i.cn)(o({variant:r,size:c,className:n})),ref:t,...d})});l.displayName="Button"},7431:(e,t,n)=>{Promise.resolve().then(n.bind(n,9350))},9350:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>p});var a=n(5155),r=n(2115),s=n(2619),c=n.n(s),i=n(63),o=n(4492),l=n(5993),d=n(1362),u=n(3664),m=n(2987);let f=(0,n(1847).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var h=n(7003),x=n(5424);function g(){var e;let t=(0,i.useRouter)(),n=null!=(e=(0,i.useSearchParams)().get("email"))?e:"your email",[s,g]=(0,r.useState)(Array(6).fill("")),[p,y]=(0,r.useState)(!1),[b,v]=(0,r.useState)(!1),[j,k]=(0,r.useState)(60),[N,w]=(0,r.useState)(!1),[A,S]=(0,r.useState)(""),R=(0,r.useRef)([]);(0,r.useEffect)(()=>{if(j<=0)return;let e=setInterval(()=>k(e=>e-1),1e3);return()=>clearInterval(e)},[j]);let C=e=>{var t;null==(t=R.current[e])||t.focus()},_=(0,r.useCallback)(async()=>{let e=s.join("");if(e.length<6)return void S("Please enter all 6 digits.");y(!0),S("");try{await x.yK.verifyOtp({email:n,otp:e}),v(!0),setTimeout(()=>t.push("/"),2e3)}catch(e){e instanceof x.hD?S(e.message):S("Verification failed. Please try again."),g(Array(6).fill("")),C(0)}finally{y(!1)}},[s,n,t]);(0,r.useEffect)(()=>{!s.every(e=>""!==e)||p||b||_()},[s,_,p,b]);let E=async()=>{w(!0),S("");try{await x.yK.resendOtp({email:n})}catch(e){e instanceof x.hD&&S(e.message)}finally{w(!1),k(60),g(Array(6).fill("")),C(0)}};return(0,a.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center px-6 py-12",children:(0,a.jsxs)(o.P.div,{initial:{opacity:0,y:24},animate:{opacity:1,y:0},transition:{duration:.6},className:"w-full max-w-md",children:[(0,a.jsxs)(c(),{href:"/",className:"flex items-center gap-2 mb-12",children:[(0,a.jsx)(l.A,{className:"h-5 w-5 text-accent"}),(0,a.jsx)("span",{className:"font-display text-xl font-semibold text-foreground",children:"EstateVue"})]}),b?(0,a.jsxs)(o.P.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-center py-8",children:[(0,a.jsx)("div",{className:"flex justify-center mb-6",children:(0,a.jsx)("div",{className:"h-20 w-20 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:(0,a.jsx)(d.A,{className:"h-10 w-10 text-green-500"})})}),(0,a.jsx)("h2",{className:"font-display text-2xl font-bold text-foreground mb-2",children:"Verified!"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Your account is confirmed. Redirecting you…"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex justify-center mb-6",children:(0,a.jsx)("div",{className:"h-16 w-16 rounded-2xl bg-accent/10 flex items-center justify-center",children:(0,a.jsx)(u.A,{className:"h-8 w-8 text-accent"})})}),(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h1",{className:"font-display text-3xl font-bold text-foreground mb-2",children:"Check your inbox"}),(0,a.jsxs)("p",{className:"text-muted-foreground",children:["We sent a 6-digit code to"," ",(0,a.jsx)("span",{className:"font-medium text-foreground",children:n})]})]}),(0,a.jsx)("div",{className:"flex gap-3 justify-center mb-4",onPaste:e=>{e.preventDefault();let t=e.clipboardData.getData("text").replace(/\D/g,"").slice(0,6);if(!t)return;let n=Array(6).fill("");t.split("").forEach((e,t)=>{n[t]=e}),g(n),C(Math.min(t.length,5))},children:s.map((e,t)=>(0,a.jsx)(o.P.input,{ref:e=>{R.current[t]=e},type:"text",inputMode:"numeric",maxLength:1,value:e,onChange:e=>((e,t)=>{let n=t.replace(/\D/g,"").slice(-1);S("");let a=[...s];a[e]=n,g(a),n&&e<5&&C(e+1)})(t,e.target.value),onKeyDown:e=>((e,t)=>{if("Backspace"===t.key)if(s[e]){let t=[...s];t[e]="",g(t)}else e>0&&C(e-1);else"ArrowLeft"===t.key&&e>0?C(e-1):"ArrowRight"===t.key&&e<5&&C(e+1)})(t,e),onFocus:e=>e.target.select(),initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:.06*t},className:"w-12 h-14 text-center text-xl font-bold rounded-lg border-2 bg-background outline-none transition-all duration-200 caret-transparent\n                                        ".concat(e?"border-accent text-foreground":"border-border text-muted-foreground","\n                                        ").concat(A?"border-destructive":"","\n                                        focus:border-accent focus:ring-2 focus:ring-accent/20")},t))}),A&&(0,a.jsx)(o.P.p,{initial:{opacity:0},animate:{opacity:1},className:"text-destructive text-sm text-center mb-4",children:A}),(0,a.jsx)(h.$,{onClick:_,className:"w-full bg-accent text-accent-foreground hover:bg-accent/90 gap-2 h-11 text-base mb-6",disabled:p||s.some(e=>!e),children:p?(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"h-4 w-4 border-2 border-accent-foreground/30 border-t-accent-foreground rounded-full animate-spin"}),"Verifying…"]}):(0,a.jsxs)(a.Fragment,{children:["Verify Code ",(0,a.jsx)(m.A,{className:"h-4 w-4"})]})}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Didn't receive the code?"}),j>0?(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Resend in"," ",(0,a.jsxs)("span",{className:"font-semibold text-foreground tabular-nums",children:["0:",j.toString().padStart(2,"0")]})]}):(0,a.jsxs)("button",{onClick:E,disabled:N,className:"inline-flex items-center gap-1.5 text-sm font-medium text-accent hover:underline disabled:opacity-50",children:[(0,a.jsx)(f,{className:"h-3.5 w-3.5 ".concat(N?"animate-spin":"")}),N?"Sending…":"Resend code"]})]}),(0,a.jsx)("div",{className:"mt-8 pt-8 border-t border-border text-center",children:(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Wrong email?"," ",(0,a.jsx)(c(),{href:"/signup",className:"text-accent font-medium hover:underline",children:"Go back"})]})})]})]})})}function p(){return(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,a.jsx)("div",{className:"h-8 w-8 border-2 border-accent/30 border-t-accent rounded-full animate-spin"})}),children:(0,a.jsx)(g,{})})}}},e=>{e.O(0,[545,619,308,441,255,358],()=>e(e.s=7431)),_N_E=e.O()}]);